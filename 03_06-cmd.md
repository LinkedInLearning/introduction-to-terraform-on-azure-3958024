# download a copy of the remote state file 
terraform state pull | jq '.' > state_debug.json

# get the list of versions of your state file. Some of the flags in this command may be updated so always check Azure CLI documentation for the new flag
az storage blob list --container-name tfstate --account-name <YOUR_UNIQUE_STORAGE_ACCOUNT_NAME>  --query "[?name=='terraform.tfstate'].{Version:versionId,LastModified:properties.lastModified,Size:properties.contentLength,IsCurrentVersion:isCurrentVersion}" --include v --output table

# download from azure blob
az storage blob download --container-name tfstate --account-name <YOUR_UNIQUE_STORAGE_ACCOUNT_NAME> --version-id "<VERSION-ID>" --file restore_state.json --name terraform.tfstate

# upload the recovered state, 
az storage blob upload --container-name tfstate --account-name <YOUR_UNIQUE_STORAGE_ACCOUNT_NAME> --file restore_state.json --name terraform.tfstate --overwrite
